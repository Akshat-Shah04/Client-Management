{% extends 'header.html' %}
{% load static %}
{% block content %}
  <!-- Main Content -->
  <div class="container mt-5">
    <p class="fw-bold font-monospace fs-3 text-primary">Hello, {{ request.session.emp_name }}</p>
    <h1 class="mb-4">Welcome to the Client Management System</h1>
  </div>

  <div class="container table-responsive">
    {% if clients %}
      <table class="table table-bordered table-hover shadow-lg">
        <thead style="background-color: #2c3e50; color: #ecf0f1; font-family: 'Verdana, sans-serif';">
          <tr>
            <th scope="col">ID</th>
            <th scope="col">Client Name</th>
            <th scope="col">Mobile</th>
            <th scope="col">Sec. Mobile</th>
            <th scope="col">City</th>
            <th scope="col">Email</th>
            <th scope="col">Referred By</th>
            <th scope="col">Action</th>
          </tr>
        </thead>
        <tbody style="font-family: 'Arial, sans-serif'; font-size: 16px;">
          {% for i in clients %}
            <tr style="background-color: {% cycle '#f8f9fa' '#ffffff' %}; color: #34495e;">
              <th scope="row" style="background-color: #2abc9c; color: #ffffff;">{{ i.id }}</th>
              <td>{{ i.clientName }}</td>
              <td>{{ i.mobile }}</td>
              <td>
                {% if not i.sec_mobile %}
                  <span class="badge font-monospace bg-warning text-dark">None</span>
                {% else %}
                  {{ i.sec_mobile }}
                {% endif %}
              </td>
              <td>{{ i.city }}</td>
              <td>
                {% if not i.email %}
                  <span class="badge font-monospace bg-warning text-dark">None</span>
                {% else %}
                  {{ i.email }}
                {% endif %}
              </td>
              <td>{{ i.referredBy }}</td>
              <td>
                <div class="btn-group" role="group">
                  <a href="{% url 'update_client' pk=i.pk %}" class="btn btn-info text-white">Edit</a>
                  <a href="{% url 'delete_client' pk=i.pk %}" class="btn btn-danger text-white" onclick="return confirm('Are you sure you want to delete this client?');">Delete</a>
                </div>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p class="text-center text-muted fs-4">No clients found. Please add a new client.</p>
    {% endif %}
  </div>
{% endblock %}
