{% extends 'header.html' %}
{% load static %}
{% block content %}
  <!-- Main Content -->
  <div class="container mt-5">
    <p class="font-weight-bold font-monospace fs-3 text-primary">Hello, {{ request.session.emp_name }}</p>
    <h1 class="mb-4">Welcome to the Client Management System</h1>
  </div>

  <div class="container table-responsive">
    <table class="table table-dark table-striped table-hover">
      <thead>
        <tr>
          <th scope="col">ID</th>
          <th scope="col">Client Name</th>
          <th scope="col">PAN</th>
          <th scope="col">Aadhar</th>
          <th scope="col">Mobile</th>
          <th scope="col">City</th>
          <th scope="col">Email</th>
          <th scope="col">Services</th>
          <th scope="col">Referred By</th>
          <th scope="col">Action</th>
        </tr>
      </thead>
      <tbody>
        {% for i in clients %}
          <tr class="text-nowrap">
            <th scope="row">{{ i.id }}</th>
            <td>{{ i.clientName }}</td>
            <td>{{ i.pan }}</td>
            <td>{{ i.aadhar }}</td>
            <td>{{ i.mobile }}</td>
            <td>{{ i.city }}</td>
            <td>{{ i.email }}</td>
            <td>
              {% for service in i.services.all %}
                {{ service.name }}{% if not forloop.last %}, {% endif %}
              {% endfor %}
            </td>
            <td>
              {% if i.referredBy %}
                {{ i.referredBy.clientName }}
              {% else %}
                None
              {% endif %}
            </td>
            <td>
              <div class="btn-group" role="group" aria-label="Basic example">
                <button type="button" class="btn btn-info">Edit</button>
                <button type="button" class="btn btn-danger">Delete</button>
              </div>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endblock %}
